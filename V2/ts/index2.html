<!doctype html>
<html lang="fa">
<head>
	<title>Stopwatch2.ts test</title>
	<script src='Stopwatch2.js'></script>
	<script>
		function start(el) {
				
				el.disabled = true;
				el.innerText = 'running...';
				
				var arr = [];
				
				var map = function(collection, callback){
					var mapped = [];
					for(var i = 0; i < collection.length; i++){
						var item = collection[i];
						if(callback(item)){
							mapped.push(item);
						}
					}
					return mapped;
				};
				
				var callback = function(item){
					return item.toString();
				};
				
				// ---------------------------------------------------------
				
				setTimeout(function() {
				
					console.log('start');
					
					for(var i = 0; i < 10000000; i++){
						arr[i] = i;
					};
					
					var sw2 = Stopwatch2.startNew();
					console.log('s1: ' + sw2.startMilliseconds + ' ms');
					map(arr, callback);
					sw2.stop();
					console.log('e1: ' + sw2.stopMilliseconds + ' ms');
					console.log('custom: ' + sw2.elapsedMilliseconds + ' ms');
					
					sw2.restart();
					console.log('s2: ' + sw2.startMilliseconds + ' ms');
					arr.map(callback);
					sw2.stop();
					console.log('end2: ' + sw2.stopMilliseconds + ' ms');
					console.log('built-in: ' + sw2.elapsedMilliseconds + ' ms');
					
					console.log('end');
					
					el.disabled = false;
					el.innerText = 'Run';
					
				}, 1);
				
				
			};
	</script>
</head>
<body>
	<h1>TypeScript Test2</h1>
	<button onclick="start(this)">Run</button>
</body>
</html>